class ProductManager{constructor(){this.products=[],this.filteredProducts=[],this.currentCategory="all",this.init()}async init(){try{await this.loadProducts(),this.renderProducts(),this.setupEventListeners()}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ ProductManager:",e),this.showErrorMessage("ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹")}}async loadProducts(){return new Promise((e=>{setTimeout((()=>{this.products=[{id:1,name:"iPhone 15 Pro",category:"phones",price:99990,description:"ÐÐ¾Ð²ÐµÐ¹ÑˆÐ¸Ð¹ ÑÐ¼Ð°Ñ€Ñ‚Ñ„Ð¾Ð½ Ð¾Ñ‚ Apple Ñ Ñ€ÐµÐ²Ð¾Ð»ÑŽÑ†Ð¸Ð¾Ð½Ð½Ð¾Ð¹ ÐºÐ°Ð¼ÐµÑ€Ð¾Ð¹",image:"ðŸ“±"},{id:2,name:"Samsung Galaxy S24",category:"phones",price:79990,description:"ÐœÐ¾Ñ‰Ð½Ñ‹Ð¹ Android-ÑÐ¼Ð°Ñ€Ñ‚Ñ„Ð¾Ð½ Ñ AI Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑÐ¼Ð¸",image:"ðŸ“±"},{id:3,name:'MacBook Pro 16"',category:"laptops",price:249990,description:"ÐŸÑ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð½Ð¾ÑƒÑ‚Ð±ÑƒÐº Ð´Ð»Ñ Ñ‚Ð²Ð¾Ñ€Ñ‡ÐµÑÐºÐ¸Ñ… Ð·Ð°Ð´Ð°Ñ‡",image:"ðŸ’»"},{id:4,name:"Dell XPS 13",category:"laptops",price:129990,description:"Ð£Ð»ÑŒÑ‚Ñ€Ð°Ð±ÑƒÐº Ñ Ð±ÐµÐ·Ñ€Ð°Ð¼Ð¾Ñ‡Ð½Ñ‹Ð¼ Ð´Ð¸ÑÐ¿Ð»ÐµÐµÐ¼",image:"ðŸ’»"},{id:5,name:"iPad Air",category:"tablets",price:59990,description:"Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð»Ð°Ð½ÑˆÐµÑ‚ Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð¸ Ñ‚Ð²Ð¾Ñ€Ñ‡ÐµÑÑ‚Ð²Ð°",image:"ðŸ“±"},{id:6,name:"Samsung Tab S9",category:"tablets",price:89990,description:"ÐœÐ¾Ñ‰Ð½Ñ‹Ð¹ Ð¿Ð»Ð°Ð½ÑˆÐµÑ‚ Ñ S-Pen Ð² ÐºÐ¾Ð¼Ð¿Ð»ÐµÐºÑ‚Ðµ",image:"ðŸ“±"}],this.filteredProducts=[...this.products],e()}),500)}))}filterProducts(e){this.currentCategory=e,this.filteredProducts="all"===e?[...this.products]:this.products.filter((t=>t.category===e)),this.renderProducts()}searchProducts(e){const t=e.toLowerCase().trim();this.filteredProducts=t?this.products.filter((e=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.category.toLowerCase().includes(t))):[...this.products],this.renderProducts()}renderProducts(){const e=document.getElementById("productsGrid");e?0!==this.filteredProducts.length?e.innerHTML=this.filteredProducts.map((e=>`\n            <div class="product-card fade-in" data-product-id="${e.id}">\n                <div class="product-card__image" aria-label="Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ñ‚Ð¾Ð²Ð°Ñ€Ð° ${e.name}">\n                    ${e.image}\n                </div>\n                <span class="product-card__category">\n                    ${this.getCategoryName(e.category)}\n                </span>\n                <h3 class="product-card__title">${e.name}</h3>\n                <p class="product-card__description">${e.description}</p>\n                <div class="product-card__price">${this.formatPrice(e.price)} â‚½</div>\n                <div class="product-card__actions">\n                    <button class="product-card__btn product-card__btn--primary" \n                            onclick="productManager.addToCart(${e.id})"\n                            aria-label="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ${e.name} Ð² ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ">\n                        Ð’ ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ\n                    </button>\n                    <button class="product-card__btn product-card__btn--secondary"\n                            onclick="productManager.showProductDetails(${e.id})"\n                            aria-label="ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ Ð¾ ${e.name}">\n                        ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ\n                    </button>\n                </div>\n            </div>\n        `)).join(""):e.innerHTML='\n                <div class="text-center" style="grid-column: 1 / -1;">\n                    <p style="color: var(--text-secondary); font-size: 1.2rem;">\n                        Ð¢Ð¾Ð²Ð°Ñ€Ñ‹ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹\n                    </p>\n                </div>\n            ':console.error("Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚ productsGrid Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½")}getCategoryName(e){return{phones:"Ð¡Ð¼Ð°Ñ€Ñ‚Ñ„Ð¾Ð½Ñ‹",laptops:"ÐÐ¾ÑƒÑ‚Ð±ÑƒÐºÐ¸",tablets:"ÐŸÐ»Ð°Ð½ÑˆÐµÑ‚Ñ‹"}[e]||e}formatPrice(e){return new Intl.NumberFormat("ru-RU").format(e)}addToCart(e){const t=this.products.find((t=>t.id===e));t&&(window.cartManager.addItem(t),this.showSuccessMessage(`${t.name} Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð² ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ`))}showProductDetails(e){const t=this.products.find((t=>t.id===e));t&&alert(`${t.name}\n\n${t.description}\n\nÐ¦ÐµÐ½Ð°: ${this.formatPrice(t.price)} â‚½`)}showSuccessMessage(e){this.showMessage(e,"success")}showErrorMessage(e){this.showMessage(e,"error")}showMessage(e,t="success"){const r=document.createElement("div");r.className=`message message--${t}`,r.textContent=e,r.style.cssText="\n            position: fixed;\n            top: 100px;\n            right: 20px;\n            z-index: 3000;\n            max-width: 300px;\n            animation: slideInRight 0.3s ease;\n        ",document.body.appendChild(r),setTimeout((()=>{r.style.animation="slideOutRight 0.3s ease",setTimeout((()=>{r.parentNode&&r.parentNode.removeChild(r)}),300)}),3e3)}setupEventListeners(){document.querySelectorAll(".filter-btn").forEach((e=>{e.addEventListener("click",(e=>{const t=e.target.dataset.category;document.querySelectorAll(".filter-btn").forEach((e=>e.classList.remove("active"))),e.target.classList.add("active"),this.filterProducts(t)}))}));const e=document.querySelector(".search-input"),t=document.querySelector(".search-button");if(e&&t){const r=()=>{this.searchProducts(e.value)};t.addEventListener("click",r),e.addEventListener("keypress",(e=>{"Enter"===e.key&&r()})),e.addEventListener("input",(e=>{e.target.value.trim()||this.filterProducts(this.currentCategory)}))}}}function scrollToCatalog(){document.getElementById("catalog").scrollIntoView({behavior:"smooth"})}document.addEventListener("DOMContentLoaded",(()=>{window.productManager=new ProductManager;const e=document.createElement("style");e.textContent="\n        @keyframes slideInRight {\n            from {\n                transform: translateX(100%);\n                opacity: 0;\n            }\n            to {\n                transform: translateX(0);\n                opacity: 1;\n            }\n        }\n        \n        @keyframes slideOutRight {\n            from {\n                transform: translateX(0);\n                opacity: 1;\n            }\n            to {\n                transform: translateX(100%);\n                opacity: 0;\n            }\n        }\n    ",document.head.appendChild(e)})),window.addEventListener("error",(e=>{console.error("Global error:",e.error)})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&window.cartManager&&window.cartManager.closeCart()}));